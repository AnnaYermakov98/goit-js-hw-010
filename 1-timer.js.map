{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport { Ukrainian } from 'flatpickr/dist/l10n/uk.js';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst dateTimePicker = document.getElementById('datetime-picker');\nconst startBtn = document.querySelector('[data-start]');\nconst clockFaceDays = document.querySelector('[data-days]');\nconst clockFaceHours = document.querySelector('[data-hours]');\nconst clockFaceMinutes = document.querySelector('[data-minutes]');\nconst clockFaceSeconds = document.querySelector('[data-seconds]');\n\nlet IntervalId = null;\nlet userSelectedDate = 0;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      console.log(selectedDates[0]);\n      handleDateSelection(selectedDates);\n    },\n        altInput: true,\n        altFormat: 'F j, Y H:i',\n        locale: Ukrainian,\n  };\n\n  flatpickr(dateTimePicker, options);\n\n  function handleDateSelection (selectedDates) {\n    userSelectedDate = selectedDates[0];\n    const currentDate = new Date();\n\n    if (userSelectedDate < currentDate) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please choose a date in future'\n        });\n        startBtn.disabled = true;\n    } else {\n        startBtn.disabled = false;\n    }\n  }\n\n  startBtn.addEventListener('click', () => {\n    disableControls(true);\n    dateTimePicker._flatpickr.close();\n    startTimer();\n  });\n\n  function disableControls(isDisabled) {\n    startBtn.disabled = isDisabled;\n    dateTimePicker.disabled = isDisabled;\n}\n\n  function startTimer(){\n    IntervalId = setInterval(() => {\n        const currentTime = new Date();\n        const deltaTime = userSelectedDate - currentTime;\n\n        if (deltaTime <= 0) {\n            clearInterval(IntervalId);\n            resetClock();\n            return showTimeOutMessage();\n        }\n        const time = convertMs(deltaTime);\n        updateClock(time);\n    }, 1000);\n  }\n\n  function convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n\n  function updateClock({ days, hours, minutes, seconds }) {\n    clockFaceDays.textContent = addLeadingZero(days);\n    clockFaceHours.textContent = addLeadingZero(hours);\n    clockFaceMinutes.textContent = addLeadingZero(minutes);\n    clockFaceSeconds.textContent = addLeadingZero(seconds);\n}\n\n  function addLeadingZero(value) {\n    return String(value).padStart(2, '0');\n}\n\n  function resetClock() {\nclearInterval (IntervalId);\nupdateClock({ days: 0, hours: 0, minutes: 0, seconds: 0});\ndisableControls(false);\n  }\n\n  function showTimeOutMessage() {\niziToast.success({\n    title:'Time is up!',\n    message: 'Hour timer is over'\n});\n  }\n  \n  console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n  console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n  console.log(convertMs(24140000)); // {days: 0, hours: 6, minutes: 42, seconds: 20}"],"names":["dateTimePicker","startBtn","clockFaceDays","clockFaceHours","clockFaceMinutes","clockFaceSeconds","IntervalId","userSelectedDate","options","selectedDates","handleDateSelection","Ukrainian","flatpickr","iziToast","disableControls","startTimer","isDisabled","deltaTime","resetClock","showTimeOutMessage","time","convertMs","updateClock","ms","days","hours","minutes","seconds","addLeadingZero","value"],"mappings":"iJAOA,MAAMA,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAgB,SAAS,cAAc,aAAa,EACpDC,EAAiB,SAAS,cAAc,cAAc,EACtDC,EAAmB,SAAS,cAAc,gBAAgB,EAC1DC,EAAmB,SAAS,cAAc,gBAAgB,EAEhE,IAAIC,EAAa,KACbC,EAAmB,EAEvB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5BC,EAAoBD,CAAa,CAClC,EACG,SAAU,GACV,UAAW,aACX,OAAQE,EAAS,SACzB,EAEEC,EAAUZ,EAAgBQ,CAAO,EAEjC,SAASE,EAAqBD,EAAe,CAC3CF,EAAmBE,EAAc,CAAC,EAG9BF,EAFgB,IAAI,MAGpBM,EAAS,MAAM,CACX,MAAO,QACP,QAAS,gCACrB,CAAS,EACDZ,EAAS,SAAW,IAEpBA,EAAS,SAAW,EAEzB,CAEDA,EAAS,iBAAiB,QAAS,IAAM,CACvCa,EAAgB,EAAI,EACpBd,EAAe,WAAW,QAC1Be,GACJ,CAAG,EAED,SAASD,EAAgBE,EAAY,CACnCf,EAAS,SAAWe,EACpBhB,EAAe,SAAWgB,CAC9B,CAEE,SAASD,GAAY,CACnBT,EAAa,YAAY,IAAM,CAE3B,MAAMW,EAAYV,EADE,IAAI,KAGxB,GAAIU,GAAa,EACb,qBAAcX,CAAU,EACxBY,IACOC,EAAkB,EAE7B,MAAMC,EAAOC,EAAUJ,CAAS,EAChCK,EAAYF,CAAI,CACnB,EAAE,GAAI,CACR,CAED,SAASC,EAAUE,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAED,SAASL,EAAY,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACtDzB,EAAc,YAAc0B,EAAeJ,CAAI,EAC/CrB,EAAe,YAAcyB,EAAeH,CAAK,EACjDrB,EAAiB,YAAcwB,EAAeF,CAAO,EACrDrB,EAAiB,YAAcuB,EAAeD,CAAO,CACzD,CAEE,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEE,SAASX,GAAa,CACxB,cAAeZ,CAAU,EACzBgB,EAAY,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAC,EACxDR,EAAgB,EAAK,CAClB,CAED,SAASK,GAAqB,CAChCN,EAAS,QAAQ,CACb,MAAM,cACN,QAAS,oBACb,CAAC,CACE,CAED,QAAQ,IAAIQ,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}